
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FUTXpert</title>
    <link rel="icon" href="assets/media/logo.png"/>
    <link rel="stylesheet" href="assets/style.css">
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>

    <div class="flex flex-col items-center justify-center text-center space-y-4 mb-[-25%]">

        <div class="flex items-center justify-center relative">
            <img src="assets/media/logo.png" alt="Logo" class="w-[15vw] animate-pulse drop-shadow-lg hover:scale-110 transition-transform duration-300">
            <h1 class="ml-4 text-white font-bold text-7xl drop-shadow-lg">
                FUTXpert
            </h1>
        </div>

        <h2 class="text-8xl font-bold text-white drop-shadow-lg bg-black bg-opacity-40 p-[4%]">
            Build Your Dream Team with FUTXpert!
        </h2>
    </div>
    
    
    <div class="players">
        <!-- FRONT -->
        <div class="ST">
            <img src="assets/media/add.png" alt="Add" id="Add9" onclick="OpenModal('Add9')" class="absolute z-20 top-24 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[3vw] h-auto cursor-pointer transition-transform duration-200 hover:scale-110">
        </div>
        <div class="RW">
            <img src="assets/media/add.png" alt="Add" id="Add11" onclick="OpenModal('Add11')" class="absolute z-20 top-24 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[3vw] h-auto cursor-pointer transition-transform duration-200 hover:scale-110">
        </div>
        <div class="LW">
            <img src="assets/media/add.png" alt="Add" id="Add7" onclick="OpenModal('Add7')" class="absolute z-20 top-24 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[3vw] h-auto cursor-pointer transition-transform duration-200 hover:scale-110">
        </div>
        <!-- MIDDLE -->
        <div class="CM">
            <img src="assets/media/add.png" alt="Add" id="Add10" onclick="OpenModal('Add10')" class="absolute z-20 top-24 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[3vw] h-auto cursor-pointer transition-transform duration-200 hover:scale-110">
        </div>
        <div class="RM">
            <img src="assets/media/add.png" alt="Add" id="Add8" onclick="OpenModal('Add8')" class="absolute z-20 top-24 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[3vw] h-auto cursor-pointer transition-transform duration-200 hover:scale-110">
        </div>
        <div class="LM">
            <img src="assets/media/add.png" alt="Add" id="Add6" onclick="OpenModal('Add6')" class="absolute z-20 top-24 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[3vw] h-auto cursor-pointer transition-transform duration-200 hover:scale-110">
        </div>
        <!-- BACK -->
        <div class="CB1">
            <img src="assets/media/add.png" alt="Add" id="Add5" onclick="OpenModal('Add5')" class="absolute z-20 top-24 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[3vw] h-auto cursor-pointer transition-transform duration-200 hover:scale-110">
        </div>
        <div class="CB2">
            <img src="assets/media/add.png" alt="Add" id="Add4" onclick="OpenModal('Add4')" class="absolute z-20 top-24 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[3vw] h-auto cursor-pointer transition-transform duration-200 hover:scale-110">
        </div>
        <div class="RB">
            <img src="assets/media/add.png" alt="Add" id="Add2" onclick="OpenModal('Add2')" class="absolute z-20 top-24 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[3vw] h-auto cursor-pointer transition-transform duration-200 hover:scale-110">
        </div>
        <div class="LB">
            <img src="assets/media/add.png" alt="Add" id="Add3" onclick="OpenModal('Add3')" class="absolute z-20 top-24 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[3vw] h-auto cursor-pointer transition-transform duration-200 hover:scale-110">
        </div>
        <!-- GOAL -->
        <div class="GK">
            <img src="assets/media/add.png" alt="Add" id="Add0" onclick="OpenModal('Add0')" class="absolute z-20 top-24 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[3vw] h-auto cursor-pointer transition-transform duration-200 hover:scale-110">
        </div>
    </div>


    <!-- Modal -->
    <div id="Modal" class="relative z-[9999] hidden" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <div class="fixed inset-0 bg-gray-900 bg-opacity-75 transition-opacity" aria-hidden="true"></div>

        <div class="fixed inset-0 z-10 w-screen overflow-y-auto">
            <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">
                <div class="relative transform overflow-hidden rounded-lg bg-black bg-opacity-50 text-left shadow-2xl transition-all sm:my-8 sm:w-full sm:max-w-lg">
                    
                    <div class="flex items-center justify-between p-4 border-b border-gray-700 rounded-t">
                        <h3 class="text-lg font-semibold text-gray-100">
                            Add Player Information
                        </h3>
                        <button type="button" onclick="CloseModal()" class="text-gray-400 bg-transparent hover:bg-gray-700 hover:text-white rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center">
                            <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
                            </svg>
                            <span class="sr-only">Close modal</span>
                        </button>
                    </div>

                    <!-- Form -->
                    <form id="playerForm" class="p-4 space-y-6">
                        <div class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3">
                            <!-- Player Name -->
                            <div>
                                <label for="name" class="block text-sm font-medium text-gray-200">Name</label>
                                <input type="text" id="name" placeholder="Enter player name" class="mt-1 bg-gray-700 border border-gray-600 text-gray-100 text-sm rounded-lg block w-full p-2.5 focus:ring-blue-500 focus:border-blue-500">
                            </div>

                            <!-- Photo URL -->
                            <div>
                                <label for="photo" class="block text-sm font-medium text-gray-200">Photo URL</label>
                                <input type="text" id="photo" placeholder="Enter photo URL" class="mt-1 bg-gray-700 border border-gray-600 text-gray-100 text-sm rounded-lg block w-full p-2.5 focus:ring-blue-500 focus:border-blue-500">
                            </div>

                            <!-- Position (disabled) -->
                            <div>
                                <label for="position" class="block text-sm font-medium text-gray-200">Position</label>
                                <input type="text" id="position" placeholder="Enter position" class="mt-1 bg-gray-700 border border-gray-600 text-gray-100 text-sm rounded-lg block w-full p-2.5 focus:ring-blue-500 focus:border-blue-500">
                            </div>

                            <!-- Nationality -->
                            <div>
                                <label for="nationality" class="block text-sm font-medium text-gray-200">Nationality</label>
                                <input type="text" id="nationality" placeholder="Enter nationality" class="mt-1 bg-gray-700 border border-gray-600 text-gray-100 text-sm rounded-lg block w-full p-2.5 focus:ring-blue-500 focus:border-blue-500">
                            </div>

                            <!-- Flag URL -->
                            <div>
                                <label for="flag" class="block text-sm font-medium text-gray-200">Flag URL</label>
                                <input type="text" id="flag" placeholder="Enter flag URL" class="mt-1 bg-gray-700 border border-gray-600 text-gray-100 text-sm rounded-lg block w-full p-2.5 focus:ring-blue-500 focus:border-blue-500">
                            </div>

                            <!-- Club -->
                            <div>
                                <label for="club" class="block text-sm font-medium text-gray-200">Club</label>
                                <input type="text" id="club" placeholder="Enter club name" class="mt-1 bg-gray-700 border border-gray-600 text-gray-100 text-sm rounded-lg block w-full p-2.5 focus:ring-blue-500 focus:border-blue-500">
                            </div>

                            <!-- Club Logo URL -->
                            <div>
                                <label for="logo" class="block text-sm font-medium text-gray-200">Club Logo URL</label>
                                <input type="text" id="logo" placeholder="Enter club logo URL" class="mt-1 bg-gray-700 border border-gray-600 text-gray-100 text-sm rounded-lg block w-full p-2.5 focus:ring-blue-500 focus:border-blue-500">
                            </div>

                            <!-- Rating -->
                            <div>
                                <label for="rating" class="block text-sm font-medium text-gray-200">Rating</label>
                                <input type="number" id="rating" placeholder="Enter rating" class="mt-1 bg-gray-700 border border-gray-600 text-gray-100 text-sm rounded-lg block w-full p-2.5 focus:ring-blue-500 focus:border-blue-500">
                            </div>
                        </div>

                        <!-- Goalkeeper Attributes -->
                        <div id="goalkeeperAttributes" class="hidden grid grid-cols-2 gap-6 lg:grid-cols-3">
                            <div>
                                <label for="diving" class="block text-sm font-medium text-gray-200">Diving</label>
                                <input type="number" id="diving" placeholder="Enter diving" class="mt-1 bg-gray-700 border border-gray-600 text-gray-100 text-sm rounded-lg block w-full p-2.5 focus:ring-blue-500 focus:border-blue-500">
                            </div>
                            <div>
                                <label for="handling" class="block text-sm font-medium text-gray-200">Handling</label>
                                <input type="number" id="handling" placeholder="Enter handling" class="mt-1 bg-gray-700 border border-gray-600 text-gray-100 text-sm rounded-lg block w-full p-2.5 focus:ring-blue-500 focus:border-blue-500">
                            </div>
                            <div>
                                <label for="kicking" class="block text-sm font-medium text-gray-200">Kicking</label>
                                <input type="number" id="kicking" placeholder="Enter kicking" class="mt-1 bg-gray-700 border border-gray-600 text-gray-100 text-sm rounded-lg block w-full p-2.5 focus:ring-blue-500 focus:border-blue-500">
                            </div>
                            <div>
                                <label for="reflexes" class="block text-sm font-medium text-gray-200">Reflexes</label>
                                <input type="number" id="reflexes" placeholder="Enter reflexes" class="mt-1 bg-gray-700 border border-gray-600 text-gray-100 text-sm rounded-lg block w-full p-2.5 focus:ring-blue-500 focus:border-blue-500">
                            </div>
                            <div>
                                <label for="speed" class="block text-sm font-medium text-gray-200">Speed</label>
                                <input type="number" id="speed" placeholder="Enter speed" class="mt-1 bg-gray-700 border border-gray-600 text-gray-100 text-sm rounded-lg block w-full p-2.5 focus:ring-blue-500 focus:border-blue-500">
                            </div>
                            <div>
                                <label for="positioning" class="block text-sm font-medium text-gray-200">Positioning</label>
                                <input type="number" id="positioning" placeholder="Enter positioning" class="mt-1 bg-gray-700 border border-gray-600 text-gray-100 text-sm rounded-lg block w-full p-2.5 focus:ring-blue-500 focus:border-blue-500">
                            </div>
                        </div>


                        <div id="fieldPlayerAttributes" class="hidden grid grid-cols-2 gap-6 lg:grid-cols-3">
                            <div>
                                <label for="pace" class="block text-sm font-medium text-gray-200">Pace</label>
                                <input type="number" id="pace" placeholder="Enter pace" class="mt-1 bg-gray-700 border border-gray-600 text-gray-100 text-sm rounded-lg block w-full p-2.5 focus:ring-blue-500 focus:border-blue-500">
                            </div>
                            <div>
                                <label for="shooting" class="block text-sm font-medium text-gray-200">Shooting</label>
                                <input type="number" id="shooting" placeholder="Enter shooting" class="mt-1 bg-gray-700 border border-gray-600 text-gray-100 text-sm rounded-lg block w-full p-2.5 focus:ring-blue-500 focus:border-blue-500">
                            </div>
                            <div>
                                <label for="passing" class="block text-sm font-medium text-gray-200">Passing</label>
                                <input type="number" id="passing" placeholder="Enter passing" class="mt-1 bg-gray-700 border border-gray-600 text-gray-100 text-sm rounded-lg block w-full p-2.5 focus:ring-blue-500 focus:border-blue-500">
                            </div>
                            <div>
                                <label for="dribbling" class="block text-sm font-medium text-gray-200">Dribbling</label>
                                <input type="number" id="dribbling" placeholder="Enter dribbling" class="mt-1 bg-gray-700 border border-gray-600 text-gray-100 text-sm rounded-lg block w-full p-2.5 focus:ring-blue-500 focus:border-blue-500">
                            </div>
                            <div>
                                <label for="defending" class="block text-sm font-medium text-gray-200">Defending</label>
                                <input type="number" id="defending" placeholder="Enter defending" class="mt-1 bg-gray-700 border border-gray-600 text-gray-100 text-sm rounded-lg block w-full p-2.5 focus:ring-blue-500 focus:border-blue-500">
                            </div>
                            <div>
                                <label for="physical" class="block text-sm font-medium text-gray-200">Physical</label>
                                <input type="number" id="physical" placeholder="Enter physical" class="mt-1 bg-gray-700 border border-gray-600 text-gray-100 text-sm rounded-lg block w-full p-2.5 focus:ring-blue-500 focus:border-blue-500">
                            </div>
                        </div>


                        <div class="text-center mt-6">
                            <button type="submit" id="submitButton" class="bg-blue-500 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg w-full sm:w-auto">Save Player</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    

    <!-- Button to open overlay -->
    <div class="flex items-center justify-center my-[10%]">
        <button id="openOverlay" class="bg-gradient-to-r from-yellow-500 to-yellow-700 text-white font-semibold text-lg py-3 px-6 rounded-full shadow-lg transform transition-transform duration-300 hover:scale-105 hover:shadow-xl focus:outline-none">
            Substitutions
        </button>
    </div>

    <!-- Overlay Section -->
    <section id="substitutionsOverlay" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-black bg-opacity-50 rounded-lg w-full">

            <button id="closeOverlay" class="text-white font-bold m-4">
                X
            </button>

            <h2 class="text-8xl font-bold text-white text-center drop-shadow-lg bg-opacity-40 p-[2%]">
                Substitutions
            </h2>
            <div class="sliderDiv mt-4">
                <div id="playerSlider" class="slider">
                    <!-- Slider content here -->
                </div>
            </div>
        </div>
    </section>

    
    <script >
        document.addEventListener('DOMContentLoaded', () => {
    const savedPlayers = JSON.parse(localStorage.getItem('players')) || [];
    
    savedPlayers.forEach(player => {
        populatePlayerCard(player);
    });
});

// Listen for form submission
document.getElementById('playerForm').addEventListener('submit', function (e) {
    e.preventDefault();

    const playerData = {
        name: document.getElementById('name').value.trim(),
        photo: document.getElementById('photo').value.trim(),
        position: document.getElementById('position').value.trim(),
        nationality: document.getElementById('nationality').value.trim(),
        flag: document.getElementById('flag').value.trim(),
        club: document.getElementById('club').value.trim(),
        logo: document.getElementById('logo').value.trim(),
        rating: document.getElementById('rating').value.trim(),
        pace: document.getElementById('pace').value.trim(),
        shooting: document.getElementById('shooting').value.trim(),
        passing: document.getElementById('passing').value.trim(),
        dribbling: document.getElementById('dribbling').value.trim(),
        defending: document.getElementById('defending').value.trim(),
        physical: document.getElementById('physical').value.trim(),
        diving: document.getElementById('diving').value.trim(),
        handling: document.getElementById('handling').value.trim(),
        kicking: document.getElementById('kicking').value.trim(),
        reflexes: document.getElementById('reflexes').value.trim(),
        speed: document.getElementById('speed').value.trim(),
        positioning: document.getElementById('positioning').value.trim(),
    };

    // Validate the inputs
    let isValid = true;
    const validationMessages = [];

    if (playerData.name === '') {
        isValid = false;
        validationMessages.push('Name is required.');
    }

    const urlRegex = /^(https?|ftp):\/\/[^\s/$.?#].[^\s]*$/i;
    if (!urlRegex.test(playerData.photo)) {
        isValid = false;
        validationMessages.push('Invalid Photo URL.');
    }
    if (!urlRegex.test(playerData.flag)) {
        isValid = false;
        validationMessages.push('Invalid Flag URL.');
    }
    if (!urlRegex.test(playerData.logo)) {
        isValid = false;
        validationMessages.push('Invalid Club Logo URL.');
    }

    const rating = parseInt(playerData.rating);
    if (isNaN(rating) || rating < 1 || rating > 100) {
        isValid = false;
        validationMessages.push('Rating must be a number between 1 and 100.');
    }

    // (if position is GK)
    if (playerData.position === "GK") {
        const goalkeeperAttributes = ['diving', 'handling', 'kicking', 'reflexes', 'speed', 'positioning'];
        goalkeeperAttributes.forEach(attr => {
            const value = parseInt(playerData[attr]);
            if (isNaN(value) || value < 1 || value > 100) {
                isValid = false;
                validationMessages.push(`${attr.charAt(0).toUpperCase() + attr.slice(1)} must be a number between 1 and 100.`);
            }
        });
    }
    else {
        const attributes = ['pace', 'shooting', 'passing', 'dribbling', 'defending', 'physical'];
        attributes.forEach(attr => {
            const value = parseInt(playerData[attr]);
            if (isNaN(value) || value < 1 || value > 100) {
                isValid = false;
                validationMessages.push(`${attr.charAt(0).toUpperCase() + attr.slice(1)} must be a number between 1 and 100.`);
            }
        });
    }

    // Show validation messages if any
    if (!isValid) {
        alert(validationMessages.join('\n'));
        return;
    }

    const savedPlayers = JSON.parse(localStorage.getItem('players')) || [];
    const existingIndex = savedPlayers.findIndex(p => p.position === playerData.position);

    if (existingIndex !== -1) {
        savedPlayers[existingIndex] = playerData;
    } else {
        savedPlayers.push(playerData);
    }
    localStorage.setItem('players', JSON.stringify(savedPlayers));

    populatePlayerCard(playerData);

    CloseModal();
    e.target.reset();
});

  
// Function to populate a player card
function populatePlayerCard(player) {
    const { position, name, photo, nationality, flag, club, logo, rating, diving, handling, kicking, reflexes, speed, positioning, pace, shooting, passing, dribbling, defending, physical } = player;

    if (!position) {
        console.error('Invalid position:', position);
        return;
    }

    const positionCard = document.querySelector(`.players .${position}`);

    if (!positionCard) {
        console.error('Position card not found for position:', position);
        return;
    }

    let cardHTML = `
        <!-- Player Card Top -->
        <div class="relative group text-[#e9cc74] player-card" data-position="${position}">
        <div class="relative group text-[#e9cc74] player-card" data-position="${position}">
            <button 
                class="modify-button text-x absolute z-20 top-2 right-[-8%] opacity-0 group-hover:opacity-100 transition-opacity duration-200 cursor-pointer"
                onclick="modifyPlayer('${position}')">
                ✎
            </button>
            <button 
                class="delete-button text-x absolute z-20 top-8 right-[-10%] opacity-0 group-hover:opacity-100 transition-opacity duration-200 cursor-pointer"
                onclick="deletePlayerCard('${position}')">
                🗑️
            </button>

            <div class="PlayerData absolute text-left pt-[1rem] text-uppercase">
                <div class="text-xs font-bold">${rating}</div>
                <div class="text-xs font-bold">${position}</div>
                <div class="block w-[1rem] h-auto my-[0.3rem]">
                    <img class="w-full h-full object-contain" src="${flag}" alt="${nationality}">
                </div>
                <div class="block w-[1rem] h-auto">
                    <img class="w-full h-full object-contain" src="${logo}" alt="${club}">
                </div>
            </div>
            <div class="PlayerImg w-[6vw] h-auto mx-auto overflow-hidden mb-1">
                <img class="w-full h-full object-contain relative bottom-0" src="${photo}" alt="${name}">
            </div>
        </div>
        <!-- Player Card Bottom -->
        <div class="relative">
            <div class="text-[#e9cc74] w-[96%] mx-auto">
                <div class="PlayerName text-center text-[0.6rem] mb-1 uppercase font-bold leading-none">
                    <span class="text-shadow">${name}</span>
                </div>
                <div class="PlayerData flex justify-center">`;

    if (position === "GK") {
        cardHTML += `
            <div class="border-r-2 border-[#e9cc74] pr-[0.4rem]">
                <span class="flex text-[0.6rem] uppercase">
                    <span class="font-bold mr-[0.3rem]">${diving}</span><span class="font-light">DIV</span>
                </span>
                <span class="flex text-[0.6rem] uppercase">
                    <span class="font-bold mr-[0.3rem]">${handling}</span><span class="font-light">HAN</span>
                </span>
                <span class="flex text-[0.6rem] uppercase">
                    <span class="font-bold mr-[0.3rem]">${kicking}</span><span class="font-light">KIC</span>
                </span>
            </div>
            <div class="pl-[0.4rem]">
                <span class="flex text-[0.6rem] uppercase">
                    <span class="font-bold mr-[0.1rem]">${reflexes}</span><span class="font-light">REF</span>
                </span>
                <span class="flex text-[0.6rem] uppercase">
                    <span class="font-bold mr-[0.1rem]">${speed}</span><span class="font-light">SPD</span>
                </span>
                <span class="flex text-[0.6rem] uppercase">
                    <span class="font-bold mr-[0.1rem]">${positioning}</span><span class="font-light">POS</span>
                </span>
            </div>`;
    } else {
        cardHTML += `
            <div class="border-r-2 border-[#e9cc74] pr-[0.4rem]">
                <span class="flex text-[0.6rem] uppercase">
                    <span class="font-bold mr-[0.3rem]">${pace}</span><span class="font-light">PAC</span>
                </span>
                <span class="flex text-[0.6rem] uppercase">
                    <span class="font-bold mr-[0.3rem]">${shooting}</span><span class="font-light">SHO</span>
                </span>
                <span class="flex text-[0.6rem] uppercase">
                    <span class="font-bold mr-[0.3rem]">${passing}</span><span class="font-light">PAS</span>
                </span>
            </div>
            <div class="pl-[0.4rem]">
                <span class="flex text-[0.6rem] uppercase">
                    <span class="font-bold mr-[0.3rem]">${dribbling}</span><span class="font-light">DRI</span>
                </span>
                <span class="flex text-[0.6rem] uppercase">
                    <span class="font-bold mr-[0.3rem]">${defending}</span><span class="font-light">DEF</span>
                </span>
                <span class="flex text-[0.6rem] uppercase">
                    <span class="font-bold mr-[0.3rem]">${physical}</span><span class="font-light">PHY</span>
                </span>
            </div>`;
    }

    cardHTML += `
                </div>
            </div>
        </div>
    `;

    positionCard.innerHTML = cardHTML;
    positionCard.classList.add('filled');
}

// Function to delete a player card
function deletePlayerCard(position) {
    const positionCard = document.querySelector(`.players .${position}`);
    if (!positionCard) return;

    positionCard.innerHTML = '';
    positionCard.classList.remove('filled');

    const savedPlayers = JSON.parse(localStorage.getItem('players')) || [];
    const updatedPlayers = savedPlayers.filter((player) => player.position !== position);
    localStorage.setItem('players', JSON.stringify(updatedPlayers));
}

  
// Function to save player data to localStorage
function savePlayerToLocalStorage(player) {
    const savedPlayers = JSON.parse(localStorage.getItem('players')) || [];
    savedPlayers.push(player);
    localStorage.setItem('players', JSON.stringify(savedPlayers));
}

// Open Modal and Prefill Position
function OpenModal(positionId) {

    const positionMap = {
        Add9: "ST",
        Add11: "RW",
        Add7: "LW",
        Add10: "CM",
        Add8: "RM",
        Add6: "LM",
        Add5: "CB1",
        Add4: "CB2",
        Add2: "RB",
        Add3: "LB",
        Add0: "GK",
    };


    const position = positionMap[positionId] || positionId;


    document.getElementById("position").value = position;

    // Show specific attributes for goalkeepers
    if (position === "GK") {
        document.getElementById("goalkeeperAttributes").classList.remove("hidden");
        document.getElementById("fieldPlayerAttributes").classList.add("hidden");
    } else {
        document.getElementById("goalkeeperAttributes").classList.add("hidden");
        document.getElementById("fieldPlayerAttributes").classList.remove("hidden");
    }

    document.getElementById("Modal").classList.remove("hidden");
}

// Close Modal
function CloseModal() {

    document.querySelectorAll("#Modal input").forEach(input => {
        input.value = "";
    });
    document.getElementById("Modal").classList.add("hidden");
}


// Fetch player data from the external JSON file
async function fetchPlayerData() {
    try {
        const response = await fetch('https://theshamkhi.github.io/FUTXpert/assets/data/data.json');
        const data = await response.json();
        return data.players; 
    } catch (error) {
        console.error('Error fetching player data:', error);
        return [];
    }
}

// Function to autofill the form when the player name is entered
async function autofillForm(playerName) {
    const playersData = await fetchPlayerData();
    const player = playersData.find(p => p.name.toLowerCase() === playerName.toLowerCase());
    
    if (player) {

        document.getElementById('photo').value = player.photo;
        document.getElementById('position').value = player.position;
        document.getElementById('nationality').value = player.nationality;
        document.getElementById('flag').value = player.flag;
        document.getElementById('club').value = player.club;
        document.getElementById('logo').value = player.logo;
        document.getElementById('rating').value = player.rating;
        document.getElementById('pace').value = player.pace;
        document.getElementById('shooting').value = player.shooting;
        document.getElementById('passing').value = player.passing;
        document.getElementById('dribbling').value = player.dribbling;
        document.getElementById('defending').value = player.defending;
        document.getElementById('physical').value = player.physical;
        document.getElementById('diving').value = player.diving;
        document.getElementById('handling').value = player.handling;
        document.getElementById('kicking').value = player.kicking;
        document.getElementById('reflexes').value = player.reflexes;
        document.getElementById('speed').value = player.speed;
        document.getElementById('positioning').value = player.positioning;
    }
}

document.getElementById('name').addEventListener('input', function () {
    const playerName = this.value.trim();
    
    if (playerName) {
        autofillForm(playerName);
    }
});

function modifyPlayer(position) {
    const savedPlayers = JSON.parse(localStorage.getItem('players')) || [];
    const player = savedPlayers.find(p => p.position === position);

    if (player) {

        document.getElementById('name').value = player.name;
        document.getElementById('photo').value = player.photo;
        document.getElementById('position').value = player.position;
        document.getElementById('nationality').value = player.nationality;
        document.getElementById('flag').value = player.flag;
        document.getElementById('club').value = player.club;
        document.getElementById('logo').value = player.logo;
        document.getElementById('rating').value = player.rating;
        document.getElementById('pace').value = player.pace;
        document.getElementById('shooting').value = player.shooting;
        document.getElementById('passing').value = player.passing;
        document.getElementById('dribbling').value = player.dribbling;
        document.getElementById('defending').value = player.defending;
        document.getElementById('physical').value = player.physical;
        document.getElementById('diving').value = player.diving;
        document.getElementById('handling').value = player.handling;
        document.getElementById('kicking').value = player.kicking;
        document.getElementById('reflexes').value = player.reflexes;
        document.getElementById('speed').value = player.speed;
        document.getElementById('positioning').value = player.positioning;


        OpenModal(player.position);
    }
}


// Overlay
const openOverlayBtn = document.getElementById('openOverlay');
const substitutionsOverlay = document.getElementById('substitutionsOverlay');
const closeOverlayBtn = document.getElementById('closeOverlay');

openOverlayBtn.addEventListener('click', () => {
    substitutionsOverlay.classList.remove('hidden');
});

closeOverlayBtn.addEventListener('click', () => {
    substitutionsOverlay.classList.add('hidden');
});



const savedPlayers = JSON.parse(localStorage.getItem('players')) || []; // players on localStorage

// Fetch player data
fetch('https://theshamkhi.github.io/FUTXpert/assets/data/data.json')
    .then(response => response.json())
    .then(data => {
        const players = data.players;
        const playerSlider = document.getElementById('playerSlider');

        const playersNotInLocalStorage = players.filter(player => {
            return !savedPlayers.some(savedPlayer => savedPlayer.name === player.name);
        });

        playersNotInLocalStorage.forEach(player => {
            let cardHTML = `
                <div class="relative w-[300px] h-[485px] scale-[0.8] bg-cover bg-center p-[2.5rem] z-10" style="background-image: url('https://selimdoyranli.com/cdn/fut-player-card/img/card_bg.png');">
                    
                    <!-- Player Card Top -->
                    <div class="flex relative text-[#e9cc74]">
                        <div class="absolute text-left pt-[2rem] text-uppercase">
                            <div class="text-2xl font-bold">${player.rating}</div>
                            <div class="text-xl font-bold">${player.position}</div>
                            
                            <div class="block w-[2rem] h-[25px] my-[0.3rem]">
                                <img class="w-full h-full object-contain" src="${player.flag}" alt="${player.nationality}">
                            </div>
                            
                            <div class="block w-[2.1rem] h-[40px]">
                                <img class="w-full h-full object-contain" src="${player.logo}" alt="${player.club}">
                            </div>
                        </div>
                        
                        <div class="w-[220px] h-auto mx-auto overflow-hidden">
                            <img class="w-full h-full object-contain relative bottom-0" src="${player.photo}" alt="${player.name}">
                        </div>
                    </div>
                
                    <!-- Player Card Bottom -->
                    <div class="relative">
                        <div class="text-[#e9cc74] w-[90%] mx-auto py-[0.3rem_0]">
                            
                            <div class="text-center text-xl font-bold uppercase border-b-2 border-[#e9cc74] py-[1rem]">
                                <span class="text-shadow">${player.name}</span>
                            </div>
                
                            <div class="flex justify-center my-[0.5rem]">`;

            if (player.position === "GK") {
                cardHTML += ` 
                    <div class="border-r-2 pr-[2.3rem]">
                        <span class="flex text-lg uppercase">
                            <span class="font-bold mr-[0.3rem]">${player.diving}</span><span class="font-light">DIV</span>
                        </span>
                        <span class="flex text-lg uppercase">
                            <span class="font-bold mr-[0.3rem]">${player.handling}</span><span class="font-light">HAN</span>
                        </span>
                        <span class="flex text-lg uppercase">
                            <span class="font-bold mr-[0.3rem]">${player.kicking}</span><span class="font-light">KIC</span>
                        </span>
                    </div>
                    <div class="pl-[2.3rem]">
                        <span class="flex text-lg uppercase">
                            <span class="font-bold mr-[0.3rem]">${player.reflexes}</span><span class="font-light">REF</span>
                        </span>
                        <span class="flex text-lg uppercase">
                            <span class="font-bold mr-[0.3rem]">${player.speed}</span><span class="font-light">SPD</span>
                        </span>
                        <span class="flex text-lg uppercase">
                            <span class="font-bold mr-[0.3rem]">${player.positioning}</span><span class="font-light">POS</span>
                        </span>
                    </div>`;
            } else {
                cardHTML += ` 
                    <div class="border-r-2 pr-[2.3rem]">
                        <span class="flex text-lg uppercase">
                            <span class="font-bold mr-[0.3rem]">${player.pace}</span><span class="font-light">PAC</span>
                        </span>
                        <span class="flex text-lg uppercase">
                            <span class="font-bold mr-[0.3rem]">${player.shooting}</span><span class="font-light">SHO</span>
                        </span>
                        <span class="flex text-lg uppercase">
                            <span class="font-bold mr-[0.3rem]">${player.passing}</span><span class="font-light">PAS</span>
                        </span>
                    </div>
                    <div class="pl-[2.3rem]">
                        <span class="flex text-lg uppercase">
                            <span class="font-bold mr-[0.3rem]">${player.dribbling}</span><span class="font-light">DRI</span>
                        </span>
                        <span class="flex text-lg uppercase">
                            <span class="font-bold mr-[0.3rem]">${player.defending}</span><span class="font-light">DEF</span>
                        </span>
                        <span class="flex text-lg uppercase">
                            <span class="font-bold mr-[0.3rem]">${player.physical}</span><span class="font-light">PHY</span>
                        </span>
                    </div>`;
            }

            cardHTML += `
                            </div>
                        </div>
                    </div>
                </div>`;

            playerSlider.innerHTML += cardHTML;
        });
    })

    
    .catch(error => console.error('Error fetching player data:', error));

    </script>


<h1>Top Players</h1>



<div id="playerList"></div>
<div id="topPlayersContainer"></div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const playerForm = document.getElementById('playerForm');
  const playerList = document.getElementById('playerList');

  
  let players = JSON.parse(localStorage.getItem('players')) || [];
  displayPlayers(players);


  playerForm.addEventListener('submit', function(event) {
    event.preventDefault();
    const playerName = document.getElementById('playerName').value;
    const playerScore = parseInt(document.getElementById('playerScore').value);

    if (playerName && !isNaN(playerScore)) {
      players.push({ name: playerName, score: playerScore });
      localStorage.setItem('players', JSON.stringify(players));
      displayPlayers(players);
      document.getElementById('playerName').value = '';
      document.getElementById('playerScore').value = '';
      displayTopPlayers(); 
    }
  });


  function displayPlayers(players) {
    playerList.innerHTML = '';
    players.forEach(player => {
      const playerCard = document.createElement('div');
      playerCard.classList.add('player-card');
      playerCard.innerHTML = `<h3>${player.name}</h3><p>Score: ${player.score}</p>`;
      playerList.appendChild(playerCard);
    });
  }

  function deletePlayerCard(playerName) {
    players = players.filter(player => player.name !== playerName);
    localStorage.setItem('players', JSON.stringify(players));
    displayPlayers(players);
    displayTopPlayers(); 
  }

  function displayTopPlayers() {
    const savedPlayers = JSON.parse(localStorage.getItem('players')) || [];
    
    const sortedPlayers = savedPlayers.sort((a, b) => b.score - a.score);
    
    const topPlayers = sortedPlayers.slice(0, 3);
    
    let topPlayersContainer = document.getElementById('topPlayersContainer');
        topPlayersContainer.innerHTML = '<h2>Top 3 Players</h2>';
    
    topPlayers.forEach(player => {
        const playerCard = document.createElement('div');
        playerCard.innerHTML = `
            <h3>${player.name}</h3>
            <p>Score: ${player.score}</p>
        `;
        topPlayersContainer.appendChild(playerCard);
    });
  }

  displayTopPlayers(); 

});
</script>

</body>
</html>





</body>
</html>